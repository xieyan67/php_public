<?php

// $a='The+SQL+is+UPDATE+user_course_1+SET+uid+%3D+%3Aafter_uid+WHERE+uid+%3D+%3Apre_uid%0AThe+parameters+are+%7B%22%3Aafter_uid%22%3A930721%2C%22%3Apre_uid%22%3A930771%7D%0AThe+error+message+is+SQLSTATE%5B23000%5D%3A+Integrity+constraint+violation%3A+1062+Duplicate+entry+%27930721-4091%27+for+key+%27unique_uid_cid%27%0AThe+error+trace+is+%230+%2Fproject%2FYiQiSchool%2Fframework%2Fdatabase%2FYiQiDatabase.php%28110%29%3A+PDOStatement-%3Eexecute%28Array%29%0A%231+%2Fproject%2FYiQiSchool%2Fframework%2Fdatabase%2FYiQiDatabase.php%28123%29%3A+framework%5Cdatabase%5CYiQiDatabase-%3Eexecute%28%27UPDATE+user_cou...%27%2C+Array%29%0A%232+%2Fproject%2FYiQiSchool%2Fframework%2Fdatabase%2FYiQiDatabase.php%28131%29%3A+framework%5Cdatabase%5CYiQiDatabase-%3EdoExecute%28%27UPDATE+user_cou...%27%2C+Array%29%0A%233+%2Fproject%2FYiQiSchool%2Fframework%2Form%2FQueryBuilder.php%28287%29%3A+framework%5Cdatabase%5CYiQiDatabase-%3Eupdate%28%27UPDATE+user_cou...%27%2C+Array%29%0A%234+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fshop%2Fmodels%2FUserCourseModel.php%28871%29%3A+framework%5Corm%5CQueryBuilder-%3Eexecute%28Array%29%0A%235+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fshop%2Fmodels%2FUserCourseModel.php%28949%29%3A+app%5Cmodules%5Cshop%5Cmodels%5CUserCourseModel-%3EmigrateUserCourseSameTable%28%27user_course_1%27%2C+930771%2C+930721%29%0A%236+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fshop%2Fservices%2FUserCourseService.php%28593%29%3A+app%5Cmodules%5Cshop%5Cmodels%5CUserCourseModel-%3EmigrateUserCourseUserId%28930771%2C+930721%29%0A%237+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fuser%2Fservices%2FUserService.php%28679%29%3A+app%5Cmodules%5Cshop%5Cservices%5CUserCourseService-%3EmigrateUserCourseUserId%28930771%2C+930721%29%0A%238+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fuser%2Fcontrollers%2FUserAuthController.php%28411%29%3A+app%5Cmodules%5Cuser%5Cservices%5CUserService-%3EmigrateUserCourseUserId%28930771%2C+930721%29%0A%239+%2Fproject%2FYiQiSchool%2Fapp%2Fmodules%2Fuser%2Fcontrollers%2FUserAuthController.php%28185%29%3A+app%5Cmodules%5Cuser%5Ccontrollers%5CUserAuthController-%3EclaimDataSaveUser%28%27bc%27%29%0A%2310+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2841%29%3A+app%5Cmodules%5Cuser%5Ccontrollers%5CUserAuthController-%3Ecreate%28%29%0A%2311+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FAbstractFilter.php%2810%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2312+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2835%29%3A+framework%5Cfilter%5CAbstractFilter-%3Efilter%28Object%28framework%5Cfilter%5CFilterChain%29%29%0A%2313+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FAbstractFilter.php%2810%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2314+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2835%29%3A+framework%5Cfilter%5CAbstractFilter-%3Efilter%28Object%28framework%5Cfilter%5CFilterChain%29%29%0A%2315+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FAbstractFilter.php%2810%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2316+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2835%29%3A+framework%5Cfilter%5CAbstractFilter-%3Efilter%28Object%28framework%5Cfilter%5CFilterChain%29%29%0A%2317+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FAbstractFilter.php%2810%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2318+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2835%29%3A+framework%5Cfilter%5CAbstractFilter-%3Efilter%28Object%28framework%5Cfilter%5CFilterChain%29%29%0A%2319+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FAbstractFilter.php%2810%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2320+%2Fproject%2FYiQiSchool%2Fframework%2Ffilter%2FFilterChain.php%2835%29%3A+framework%5Cfilter%5CAbstractFilter-%3Efilter%28Object%28framework%5Cfilter%5CFilterChain%29%29%0A%2321+%2Fproject%2FYiQiSchool%2Fframework%2FRouter.php%2887%29%3A+framework%5Cfilter%5CFilterChain-%3Erun%28%29%0A%2322+%2Fproject%2FYiQiSchool%2Fframework%2FFWApplication.php%2859%29%3A+framework%5CRouter-%3Edispatch%28%29%0A%2323+%2Fproject%2FYiQiSchool%2Fframework%2FFWApplication.php%2840%29%3A+framework%5CFWApplication-%3Eexecute%28Object%28framework%5CFWRequest%29%2C+Object%28framework%5CFWResponse%29%29%0A%2324+%2Fproject%2FYiQiSchool%2Fweb%2Fapp.php%2828%29%3A+framework%5CFWApplication-%3Erun%28%29%0A%2325+%7Bmain%7D';
// echo urldecode($a) , PHP_EOL;

// $a='{"app_version":"6.3","token":"p7uyr1jpfu8ba82p8uzg","api_version":8,"client_type":"app","device_id":"10249E29-7B23-4F29-8DE5-88E106754A54","device_type":"ios"}';
// echo '{"body":"',aesEncode($a),'"}',PHP_EOL;

// $b="H38Pziy0lY7hpKwPaXqDyW89ZXSS1Rq8w3UxFESgtz8=";
// print_r(json_decode(aesDecode($b),true));
    
function aesEncode( $sourcestr ) {
    $padded_data = $sourcestr . str_repeat(chr(0), 16 - (strlen($sourcestr) % 16));
    return  base64_encode(openssl_encrypt($padded_data, 'aes-128-cbc', 'ts1ngz0ne2015NO1', OPENSSL_RAW_DATA|OPENSSL_ZERO_PADDING, '0102030405060708'));
}
function aesDecode( $crypttext ) {
    return trim(trim(openssl_decrypt(base64_decode($crypttext), "aes-128-cbc", 'ts1ngz0ne2015NO1', OPENSSL_RAW_DATA|OPENSSL_ZERO_PADDING, '0102030405060708')), "\x08");
}
?>